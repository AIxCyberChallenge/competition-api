---
# Example Config File

postgres:
  user: competitionapi
  password: competitionapi
  database: competitionapi
  # host: localhost
  # port: 5432
# listen_address: "[::]:1323"
round_id: "testing"

azure:
  dev: true
  storage_account:
    name: "devstoreaccount1"
    key: "Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw=="
    containers:
      url: "http://localhost:10000/devstoreaccount1/"
      submissions: submissions
      sources: sources
      artifacts: artifacts
    queues:
      url: "http://localhost:10001/devstoreaccount1/"
      results: results

teams:
  - id: 11111111-1111-1111-1111-111111111111
    note: Test Key for Local Auth
    api_key:
      token: secret
      active: true
      permissions:
        crs: true
        competition_management: true
    crs:
      task_me: true
      url: https://crs.example.com
      api_key_id: foo
      api_key_token: foo

logging:
  gorm:
    level: 0
    trace_queries: true
  app:
    level: -4
  use_otlp: false
  environment: local

k8s:
  in_cluster: false
  namespace: "dev"
  job_image: "ghcr.io/aixcyberchallenge/competition-api/competition-api:latest"
  dind_image: "ghcr.io/aixcyberchallenge/competition-api/docker:latest"
  broadcast_node_assignment:
    node_affinity_label:
      key: "kubernetes.io/os"
      value: "linux"
    toleration:
      key: "doesnt"
      value: "matter"
  eval_node_assignment:
    node_affinity_label:
      key: "kubernetes.io/os"
      value: "linux"
    toleration:
      key: "doesnt"
      value: "matter"
  scoring_node_assignment:
    node_affinity_label:
      key: "kubernetes.io/os"
      value: "linux"
    toleration:
      key: "doesnt"
      value: "matter"

github:
  webhook_secret: ""
  app_id: 123
  app_key_path: "/fake/path/to/key.pem"

s3_archive:
  enabled: false
  endpoint: https://fake.fake
  access_key_id: public
  secret_access_key: secret
  bucket_name: mybucket

generate:
  enabled: true
  installation_id: 1
  delta:
    repo_url: "https://github.com/foo/bar"
    base_ref: "main"
    head_ref: "main"
  repos:
  challenges:
    - name: chal1
      config:
        repo_url: "https://github.com/foo/bar"
        base_ref: ref
        head_ref: ref
    - name: chal2
      config:
        repo_url: "https://github.com/foo/bar"
        base_ref: ref
        head_ref: ref

ignored_repos:
  - "https://do.not.generate.tasks.on.this.repo.com/repo.git"

cache_key: abc123
